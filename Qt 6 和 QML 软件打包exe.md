核心思想是：首先在 `Release` 模式下编译您的应用程序，然后使用 Qt 官方提供的 `windeployqt` 工具来自动收集所有必需的依赖项（DLL 文件、QML 插件等），最后将所有文件打包成一个方便分发的文件夹或安装程序。

---

### 第一步：以 Release 模式编译您的应用程序

在分发软件时，应始终使用 Release 版本，因为它经过了优化，运行速度更快，并且生成的文件体积更小。

1. **在 Qt Creator 中：**
    
    - 在左下角将构建套件（Kit）的构建模式从 `Debug` 切换到 `Release`。
        
    - 点击“构建”菜单 -> “构建项目”或直接运行项目以生成 `Release` 版本的 `.exe` 文件。
        
2. **查找生成的可执行文件：**
    
    - 编译完成后，您可以在项目的构建目录中找到 `.exe` 文件。通常路径类似于 `build-yourproject-Desktop_Qt_6_x_x_MSVC2019_64bit-Release/release/your_app_name.exe`。
        

---

### 第二步：使用 `windeployqt` 工具自动部署

`windeployqt` 是 Qt 提供的官方部署工具，它可以极大地简化打包过程。它会自动扫描您的 `.exe` 文件，并把所有依赖的 Qt 库、插件和翻译文件复制到您的应用程序目录中。

1. **准备一个干净的发布文件夹：**
    
    - 创建一个新的、干净的文件夹，用于存放所有将要发布的文件（例如，在桌面上创建一个名为 `MyApp-Release` 的文件夹）。
        
    - 将上一步中生成的 `your_app_name.exe` 文件复制到这个新文件夹中。
        
2. **打开正确的命令行环境：**
    
    - 您需要使用与您编译项目时所用套件相匹配的 Qt 命令行工具。
        
    - 在 Windows 的“开始”菜单中，找到您的 Qt 安装目录，然后打开对应的命令行工具，例如 **“Qt 6.x.x (MSVC 2019 64-bit)”**。
        
3. **运行 `windeployqt` 命令：**
    
    - 在打开的命令行窗口中，首先使用 `cd` 命令切换到您刚刚创建的发布文件夹。
        
    - 然后，运行 `windeployqt` 命令。为了确保 QML 相关的依赖被正确打包，请务必添加 `--qmldir` 参数，指向您项目中存放 QML 文件的源代码目录。
        
    
    **命令格式如下：**
    
    Bash
    
    ```
    # 切换到你的发布文件夹
    cd C:\Users\YourUser\Desktop\MyApp-Release
    
    # 运行 windeployqt
    # --qmldir 参数非常重要，它指向你项目QML文件的根目录
    windeployqt --qmldir C:\path\to\your\project\source\qml_folder your_app_name.exe
    ```
    
    **参数说明：**
    
    - `your_app_name.exe`: 您的应用程序可执行文件名。
        
    - `--qmldir <path>`: 指定包含您的 QML 源文件的主目录。这会让 `windeployqt` 扫描 QML 文件以查找模块依赖项，并自动复制所需的 Qt Quick 插件。
        
4. **检查结果：**
    
    - 命令执行完毕后，您会看到发布文件夹中被自动添加了大量的 `.dll` 文件和 `plugins`、`qml` 等子文件夹。
        
    - 现在，您可以尝试直接双击发布文件夹中的 `.exe` 文件，它应该能够独立运行了。
        

---

### 第三步：处理非 Qt 依赖和资源文件

`windeployqt` 主要处理 Qt 自身的依赖，您可能还需要手动处理其他文件。

1. **QML 文件和图片等资源：**
    
    - **方法一（推荐）：使用 Qt 资源系统（.qrc）**
        
        - 在您的 Qt 项目中创建一个 `.qrc` 文件，并将所有的 `.qml` 文件、图片、字体等资源添加到其中。
            
        - 这样做会将所有资源编译到可执行文件中，您就无需在发布时手动复制这些文件了。这是最可靠、最整洁的方法。
            
        - 在 QML 代码中引用时，路径需要使用 `qrc:/` 前缀，例如 `source: "qrc:/images/logo.png"`。
            
    - **方法二（手动复制）：**
        
        - 如果您没有使用 `.qrc`，那么您需要将所有的 `.qml` 文件和资源文件（如图片、音频）手动复制到发布文件夹中，并保持与您在代码中引用的相对路径一致。
            
2. **第三方库 DLL：**
    
    - 如果您的项目使用了任何第三方库（例如 OpenSSL、FFmpeg 等），`windeployqt` 无法自动处理它们。您需要手动找到这些库的 `.dll` 文件，并将它们复制到您的发布文件夹根目录下（与 `.exe` 文件放在一起）。
        
3. **编译器运行时库：**
    
    - 通常 `windeployqt` 会自动复制所需的 Visual C++ Redistributable DLLs（例如 `vc_redist.x64.exe` 的内容）。但有时可能会遗漏。如果您的应用在其他“干净”的电脑上无法运行，提示缺少 `VCRUNTIME140.dll` 或 `MSVCP140.dll` 等文件，您可能需要从您的 Visual Studio 安装目录中找到这些文件并复制过来，或者更推荐的做法是，让用户安装对应的 Visual C++ Redistributable 包。
        

---

### 第四步：创建安装程序（可选，但推荐）

直接将一个包含大量文件的文件夹发给用户是不够友好的。专业的做法是使用安装程序制作工具，将所有文件打包成一个单一的 `setup.exe` 文件。

常用的免费工具有：

- **NSIS (Nullsoft Scriptable Install System):** 非常流行和强大的免费工具，通过编写脚本来创建安装程序。它非常灵活，可以定制安装过程的几乎所有方面。
    
- **Inno Setup:** 另一个广受欢迎的免费安装程序制作工具，相比 NSIS，它可能更容易上手，提供了图形界面向导。
    

使用这些工具，您可以实现：

- 引导用户完成安装步骤。
    
- 在“开始”菜单和桌面上创建快捷方式。
    
- 设置文件关联。
    
- 添加卸载程序。
    

---

### 总结流程

1. **编译**：在 Qt Creator 中切换到 `Release` 模式并构建项目。
    
2. **准备**：新建一个发布文件夹，并将编译好的 `.exe` 文件放进去。
    
3. **部署**：打开 Qt 命令行，`cd` 到发布文件夹，运行 `windeployqt --qmldir <qml_source_path> your_app.exe`。
    
4. **补充**：将项目中使用到的非 Qt 依赖（第三方 DLL、资源文件等，如果未使用 .qrc）手动复制到发布文件夹。
    
5. **测试**：在发布文件夹中直接运行 `.exe`，确保可以正常工作。最好在一台没有安装 Qt 和编译环境的干净电脑上测试。
    
6. **打包**：(可选) 使用 NSIS 或 Inno Setup 等工具制作一个专业的安装包。